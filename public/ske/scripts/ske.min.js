angular.module("KnowledgePortal",["ngResource","directives","dmvPortalConfig","globals","factories"]).value("$anchorScroll",angular.noop).config(["$routeProvider","$locationProvider","$httpProvider",function(a,b,c){c.defaults.headers.get={Accept:"application/json, text/javascript, */*"},a.when("/SampleKnowledgeExam",{controller:"SKEController",templateUrl:"views/skeMenu.html"}).when("/DriversLicense:Part1-Traffic Signs",{controller:"SignsController",templateUrl:"views/exam10.html"}).when("/DriversLicense:Part2-General Knowledge",{controller:"SignsController",templateUrl:"views/exam10.html"}).when("/Motorcycle License",{controller:"SignsController",templateUrl:"views/exam10.html"}).when("/Dealer Salesperson License",{controller:"SignsController",templateUrl:"views/exam10.html"}).when("/Commercial License",{controller:"SignsController",templateUrl:"views/exam10.html"}).when("/Dealer/Operator License",{controller:"SignsController",templateUrl:"views/exam10.html"}).when("/Complete",{controller:"AnswersController",templateUrl:"views/complete.html"}).otherwise({redirectTo:"/SampleKnowledgeExam"})}]).controller("SKEController",["$scope","$rootScope","knowledgeFactory","$location","numberWrong","questionsMissed","theExam",function(a,b,c,d,e,f){a.isloading=!1,b.attempts=!1,e.length=0,f.length=0,a.signs=function(){sessionStorage.type="S",d.path("/DriversLicense:Part1-Traffic Signs")},a.general=function(){sessionStorage.type="K",d.path("/DriversLicense:Part2-General Knowledge")},a.motorcycle=function(){sessionStorage.type="M",d.path("/Motorcycle License")},a.dealerSales=function(){sessionStorage.type="D",d.path("/Dealer Salesperson License")},a.commercial=function(){sessionStorage.type="C",d.path("/Commercial License")},a.dealerOperator=function(){sessionStorage.type="O",d.path("/Dealer/Operator License")}}]).controller("SignsController",["$scope","$rootScope","knowledgeFactory","$location","numberWrong","questionsMissed","theExam",function(a,b,c,d,e,f){function g(b){a.questions=!0,a.one=b.lQuestionansAnswers[0],a.two=b.lQuestionansAnswers[1],a.three=b.lQuestionansAnswers[2],a.four=b.lQuestionansAnswers[3],a.five=b.lQuestionansAnswers[4],a.six=b.lQuestionansAnswers[5],a.seven=b.lQuestionansAnswers[6],a.eight=b.lQuestionansAnswers[7],a.nine=b.lQuestionansAnswers[8],a.ten=b.lQuestionansAnswers[9],a.q=function(a,b,c){var d,e="q"+(a+1),f=$("div.question"+c),g=$("div.question"+(c+1)),h=b,j=h[a].CorrectAnswer;10===c&&(g="summary"),angular.forEach(h,function(a,b){a.CorrectAnswer===!0&&(d=b)}),i(e,j,f,g,d,c)}}function h(b){a.err=b.status}function i(b,c,f,g,h){var i,j=h+1,l="."+b,m=$(".q"+j);c===!0?(-1==sessionStorage.attempts&&d.path("/Complete"),$(l).addClass("selected"),$("label:not(.selected) > input").prop("disabled",!0),$("label"+l+" > span").text("Correct Answer"),"summary"===g?d.path("/Complete"):setTimeout(function(){f.fadeOut(300,function(){g.fadeIn(300),$("label").removeClass("selected").css({opacity:"1"}),$("input").prop("disabled",!1),$("label > span").text("")}),$("li,label").removeClass("wrong")},800)):(e.push(1),k.pop(),i=k.length,sessionStorage.attempts=i,$(l).addClass("wrong"),a.right=".q"+j,$("label.theQ").addClass("selected"),0===i?$("label.wrong > span").text(" Sorry, you've failed."):$("label.wrong > span").text(" Incorrect - "+i+" wrong answers remaining"),$("label:not(.selected) > input").prop("disabled",!0),setTimeout(function(){$(m).addClass("selected"),$("label.selected > input").prop("disabled",!1),$("label.q"+j+" > span").text("Correct Answer - Click to continue"),$("label:not(.selected)").fadeTo("slow",.5)},500)),2===i?(a.attempts=i+" wrong answers remaining",$("div.attempts").css("background","yellow")):1===i?(a.attempts=i+" wrong answer remaining",$("div.attempts").css("background","#F97777")):0===i&&(a.attempts="Sorry, you've failed",sessionStorage.attempts=-1),-1===i&&d.path("/Complete")}var j=sessionStorage.type,k=[1,1,1],l={TT:{testType:j}};switch(void 0===j&&d.path("/SampleKnowledgeExam"),$("label").removeClass("selected"),a.isloading=!1,e.length=0,f.length=0,$("div.attempts").css("background","#72E587"),a.one=!0,sessionStorage.attempts=k.length,a.attempts="You are allowed "+k.length+" wrong answers!",a.data=l,!0){case"S"===j:a.type="Driver's License: Part 1 - Traffic Signs",_gaq.push(["_trackEvent","Drivers License Part 1 Traffic Signs","SKE"]);break;case"K"===j:a.type="Driver's License: Part 2 - General Knowledge",_gaq.push(["_trackEvent","Drivers License Part 2 General Knowledge","SKE"]);break;case"M"===j:a.type="Motorcycle License",_gaq.push(["_trackEvent","Motorcycle License","SKE"]);break;case"D"===j:a.type="Dealer Salesperson License",_gaq.push(["_trackEvent","Dealer Salesperson License","SKE"]);break;case"C"===j:a.type="Commercial License",_gaq.push(["_trackEvent","Commercial Drivers License","SKE"]);break;case"O"===j:a.type="Dealer/Operator License",_gaq.push(["_trackEvent","Dealer/Operator License","SKE"])}c.skeQuestions({},a.data,g,h)}]).controller("AnswersController",["$scope","numberWrong","$location",function(a,b,c){var d=sessionStorage.type,e=10,f=b.length,g=sessionStorage.attempts;switch($("div.attempts").hide(),a.total=e-f,a.correct=-1==g?!1:!0,("S"===d||"K"===d)&&(a.S=!0),"M"===d&&(a.M=!0),("D"===d||"O"===d)&&(a.D=!0),"C"===d&&(a.C=!0),!0){case"S"===d:a.type="DriversLicense: Part 1-Traffic Signs";break;case"K"===d:a.type="DriversLicense: Part 2-General Knowledge";break;case"M"===d:a.type="Motorcycle License";break;case"D"===d:a.type="Dealer Salesperson License";break;case"C"===d:a.type="Commercial License";break;case"O"===d:a.type="Dealer/Operator License"}a.mainMenu=function(){c.path("/SampleKnowledgeExam")},a.driversManual=function(){window.location.replace("/drivers/#manual.html")},a.motorcycle=function(){window.location.replace("/webdoc/pdf/dmv2.pdf")},a.manualS=function(){window.location.replace("/drivers/#manual_s.html")},a.dealerM=function(){window.location.replace("/webdoc/pdf/dealer_manual.pdf")},a.commercial=function(){window.location.replace("/drivers/#cdlmanual.html")},a.dealerG=function(){window.location.replace("/webdoc/pdf/mvdb35.pdf")},a.tryAgain=function(){switch(!0){case"S"===d:_gaq.push(["_trackEvent","Drivers License Part 1 Traffic Signs -- Try Again","SKE"]),c.path("/DriversLicense:Part1-Traffic Signs");break;case"K"===d:_gaq.push(["_trackEvent","Drivers License Part 2 General Knowledge -- Try Again","SKE"]),c.path("/DriversLicense:Part2-General Knowledge");break;case"M"===d:_gaq.push(["_trackEvent","Motorcycle License -- Try Again","SKE"]),c.path("/Motorcycle License");break;case"D"===d:_gaq.push(["_trackEvent","Dealer Salesperson License -- Try Again","SKE"]),c.path("/Dealer Salesperson License");break;case"C"===d:_gaq.push(["_trackEvent","Commercial Drivers License -- Try Again","SKE"]),c.path("/Commercial License");break;case"O"===d:_gaq.push(["_trackEvent","Dealer/Operator License -- Try Again","SKE"]),c.path("/Dealer/Operator License")}}}]),angular.module("directives",[]).directive("attempts",function(){return{restrict:"A",replace:!0,template:"<div><p style='font-weight:bold;font-size:1em;'>{{attemps}}</p></div>"}}),angular.module("dmvPortalConfig",[]).config(["$provide","$httpProvider","$compileProvider",function(a,b,c){var d;window.location.host;var e,f=$(),g=function(a,b,c,d){$("<h2>").addClass("message").addClass(b).appendTo(f).text(a)};b.responseInterceptors.push(["$timeout","$q","message","$location","$window",function(a,c,f,h){var i={SampleKnowledgeExam:function(){h.path("/SampleKnowledgeExam")}};return function(f){var h=sessionStorage.id;return $("div.messagesList").length?($("div.messagesList").empty(),g("Loading...","loadingMessage",5e4)):g("Loading...","loadingMessage",5e4),f.then(function(a){if(a&&$("h2.loadingMessage").fadeOut(1040),d=a.headers("x-auth-token"),null!==d&&void 0!==d){e=a.headers("x-auth-token"),sessionStorage.id=e,credStore.push(e);var c=credStore.shift();b.defaults.headers.common={"X-Auth-Token":c},b.defaults.headers.common={Accept:"application/json, text/plain, * / *"}}return h&&(b.defaults.headers.get={Accept:"application/json, text/javascript, */*","X-Auth-Token":h},b.defaults.headers.post={Accept:"application/json, text/javascript, */*","Content-Type":"application/json; charset=utf-8","X-Auth-Token":h},b.defaults.headers.put={Accept:"application/json, text/javascript, */*","Content-Type":"application/json; charset=utf-8"}),f},function(b){var d=b.data;switch(b.status){case 404:$("div.messagesList").empty(),sessionStorage.clear(),g(d.STATUS,"errorMessage",2e4),a(i.SampleKnowledgeExam,2e3);break;case 500:$("div.messagesList").empty(),sessionStorage.clear(),g(d.STATUS,"errorMessage",2e4),a(i.SampleKnowledgeExam,2e3);break;default:g("Error "+b.status+": "+b.data,"errorMessage",2e4)}return c.reject(b)})}}]),c.directive("appMessages",function(){var a={restrict:"A",template:"<div></div>",replace:!0,link:function(a,b){f.push($(b))}};return a})}]),angular.module("factories",[]).factory("questionsMissed",function(){return[]}).factory("numberWrong",function(){return[]}).factory("type",function(){return[]}).factory("message",function(){return[]}).factory("theExam",function(){var a={};return a}).factory("knowledgeFactory",["$resource",function(a){var b="http://10.156.147.121:443:443/WebServicesBackEnd/SampleKnowledgeExam.aspx/GetSKE";return a(b,{},{skeQuestions:{method:"Post",url:b}})}]);