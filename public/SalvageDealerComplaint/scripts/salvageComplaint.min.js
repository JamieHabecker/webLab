angular.module("salvageComplaint",["ngResource","directives","globals","ui.date","factories"]).config(["$routeProvider","$locationProvider","$httpProvider",function(a,b,c){c.defaults.headers.get={Accept:"application/json, text/javascript, */*"},a.when("/",{controller:"DisclaimerController",templateUrl:"views/disclaimer.html"}).when("/StepOne",{controller:"StepOneController",templateUrl:"views/stepOne.html"}).when("/StepTwo",{controller:"StepTwoController",templateUrl:"views/stepTwo.html"}).when("/StepThree",{controller:"StepThreeController",templateUrl:"views/stepThree.html"}).when("/StepFour",{controller:"StepFourController",templateUrl:"views/stepFour.html"}).when("/StepFive",{controller:"StepFiveController",templateUrl:"views/stepFive.html"}).when("/StepSix",{controller:"StepSixController",templateUrl:"views/stepSix.html"}).when("/Verify",{controller:"VerifyController",templateUrl:"views/confirmation.html"}).when("/Complete",{controller:"CompleteController",templateUrl:"views/complete.html"}).otherwise({redirectTo:"/"})}]).controller("DisclaimerController",["$scope","$location",function(a,b){sessionStorage.clear(),a.next=function(){b.path("/StepOne")}}]).controller("StepOneController",["$scope","$location",function(a,b){var c=sessionStorage.anonymous;void 0===c?a.checkIt=!0:a.anonymous="Yes"===c?"Yes":"No",a.one=function(){sessionStorage.anonymous="Yes",a.checkIt=!1},a.two=function(){sessionStorage.anonymous="No",a.checkIt=!1},a.next=function(){"No"===a.anonymous?b.path("/StepTwo"):b.path("/StepFour")}}]).controller("StepTwoController",["$scope","$location","$timeout",function(a,b,c){var d=sessionStorage.anonymous,e=sessionStorage.stepTwo,f=sessionStorage.statetwo,g=sessionStorage.stateCodetwo;if(void 0===d&&b.path("/StepOne"),e){var h=sessionStorage.getItem("stepTwo"),i=JSON.parse(h),j={fillIt:function(){a.fn=i.firstname,a.lastname=i.lastname,a.address=i.address,a.city=i.city,a.zip=i.zip,a.current=f}};c(j.fillIt,100)}a.next=function(){var c={firstname:a.fn,lastname:a.lastname,address:a.address,city:a.city,state:f,stateCode:g,zip:a.zip};sessionStorage.setItem("stepTwo",JSON.stringify(c)),b.path("/StepThree")}}]).controller("StepThreeController",["$scope","$location","$timeout",function(a,b,c){var d=(sessionStorage.stepTwo,sessionStorage.stepThree),e=sessionStorage.complete;if(d){var f=sessionStorage.getItem("stepThree"),g=JSON.parse(f),h={fillIt:function(){a.email=g.email,a.phone=g.phone,a.conPref=g.conPref}};c(h.fillIt,100)}a.next=function(){var c={email:a.email,phone:a.phone,conPref:a.conPref};sessionStorage.setItem("stepThree",JSON.stringify(c)),e?b.path("/Verify"):b.path("/StepFour")}}]).controller("StepFourController",["$scope","$location","$timeout",function(a,b,c){var d=sessionStorage.stepFour,e=sessionStorage.stateFour,f=sessionStorage.stateCodefour,g=sessionStorage.complete,h=sessionStorage.anonymous;if(d){var i=sessionStorage.getItem("stepFour"),j=JSON.parse(i),k={fillIt:function(){a.compName=j.compName,a.address=j.address,a.city=j.city,a.zip=j.zip,a.email=j.email,a.phone=j.phone}};c(k.fillIt,100)}a.next=function(){var c={compName:a.compName,address:a.address,city:a.city,zip:a.zip,state:e,stateCode:f,email:a.email,phone:a.phone};sessionStorage.setItem("stepFour",JSON.stringify(c)),g?b.path("/Verify"):"No"===h?b.path("/StepFive"):"Yes"===h&&g?b.path("/Verify"):b.path("/StepSix")}}]).controller("StepFiveController",["$scope","$location","$timeout",function(a,b,c){var d=(sessionStorage.stepFour,sessionStorage.stepFive),e=sessionStorage.complete;if(d){var f=sessionStorage.getItem("stepFive"),g=JSON.parse(f),h={fillIt:function(){a.vyear=g.year,a.vmake=g.make,a.vmodel=g.model,a.vvin=g.vin,a.vplate=g.plate,a.vpc=g.prmColor,a.vsc=g.secColor}};c(h.fillIt,100)}a.next=function(){var c={year:a.vyear,make:a.vmake,model:a.vmodel,vin:a.vvin,plate:a.vplate,prmColor:a.vpc,secColor:a.vsc};sessionStorage.setItem("stepFive",JSON.stringify(c)),e?b.path("/Verify"):b.path("/StepSix")}}]).controller("StepSixController",["$scope","$location","$timeout",function(a,b,c){var d=sessionStorage.stepFour,e=sessionStorage.stepSix;if(void 0===d&&b.path("/"),e){var f=sessionStorage.getItem("stepSix"),g=JSON.parse(f),h={fillIt:function(){a.details=g.details}};c(h.fillIt,100)}a.next=function(){var c={details:a.details};sessionStorage.setItem("stepSix",JSON.stringify(c)),b.path("/Verify")}}]).controller("VerifyController",["$scope","$location","ContactFactory",function(a,b,c){function d(a){sessionStorage.refNumber=a.ComplaintId,b.path("/Complete")}function e(b){a.err=b.status}var f=sessionStorage.stepTwo,g=sessionStorage.stepThree,h=sessionStorage.stepFour,i=sessionStorage.stepFive,j=sessionStorage.stepSix,k=sessionStorage.stateCodetwo,l=sessionStorage.stateCodefour,m=sessionStorage.anonymous;void 0===j&&b.path("/"),j?(cdFour=JSON.parse(h),cdSix=JSON.parse(j),"No"===m?(a.vary="sec",a.vary2="sec",cdTwo=JSON.parse(f),cdThree=JSON.parse(g),cdFive=JSON.parse(i),data={pc:"true",firstname:cdTwo.firstname,lastname:cdTwo.lastname,address:cdTwo.address,city:cdTwo.city,zip:cdTwo.zip,state:k,email:cdThree.email,phone:cdThree.phone,conPref:cdThree.conPref,compName:cdFour.compName,compAddress:cdFour.address,compCity:cdFour.city,compState:l,compZip:cdFour.zip,compEmail:cdFour.email,compPhone:cdFour.phone,year:cdFive.year,make:cdFive.make,model:cdFive.model,vin:cdFive.vin,plate:cdFive.plate,complDate:cdFive.date,learned:cdFive.opts,details:cdSix.details},a.theData=[data]):(a.vary="gen",a.vary2="sec",data={pc:"false",compName:cdFour.compName,compAddress:cdFour.address,compCity:cdFour.city,compState:l,compZip:cdFour.zip,compEmail:cdFour.email,compPhone:cdFour.phone,details:cdSix.details},a.theData=[data])):(sessionStorage.clear(),b.path("/")),a.edit=function(a){sessionStorage.complete="yes",b.path("/"+a)},a.next=function(){a.isloading=!0;var b={oSalvageFields:data};sessionStorage.setItem("data",JSON.stringify(data)),c.contactInfo({},b,d,e)}}]).controller("CompleteController",["$scope","complete",function(a){a.ref="[#"+sessionStorage.refNumber+"]",sessionStorage.clear(),a.next=function(){window.location.replace("/")}}]),angular.module("directives",[]).directive("placeholder",["$timeout",function(a){if(navigator.userAgent.indexOf("MSIE")<0)return{};if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var b=new Number(RegExp.$1);return b>10?void 0:{link:function(b,c,d){"password"!==d.type&&a(function(){c.val(d.placeholder).focus(function(){$(this).val()==$(this).attr("placeholder")&&$(this).val("")}).blur(function(){""==$(this).val()&&$(this).val($(this).attr("placeholder"))})})}}}}]).directive("subject",function(){return{restrict:"E",replace:!0,templateUrl:base+"subjectSelect.html",link:function(){}}}).directive("custnumber",["$parse",function(a){return{restrict:"A",link:function(b){var c=$("input").attr("name");b.$watch(c,function(d){d&&-1!==d.indexOf("-")&&11===d.length&&a(c).assign(b,d.replace(/-/g,""))})}}}]),angular.module("dmvPortalConfig",[]).config(["$provide","$httpProvider","$compileProvider",function(a,b,c){var d;window.location.host;var e,f=$(),g=function(a,b,c,d){$("<h2>").addClass("message").addClass(b).appendTo(f).text(a)};b.responseInterceptors.push(["$timeout","$q","message","$location","$window",function(a,c,f,h){return function(a){var f=sessionStorage.id;return $("div.messagesList").length?($("div.messagesList").empty(),g("Loading...","loadingMessage",5e4)):g("Loading...","loadingMessage",5e4),a.then(function(c){if(c&&$("h2.loadingMessage").fadeOut(1040),d=c.headers("x-auth-token"),null!==d&&void 0!==d){e=c.headers("x-auth-token"),sessionStorage.id=e,credStore.push(e);var g=credStore.shift();b.defaults.headers.common={"X-Auth-Token":g},b.defaults.headers.common={Accept:"application/json, text/plain, * / *"}}return f&&(b.defaults.headers.get={Accept:"application/json, text/javascript, */*"},b.defaults.headers.post={Accept:"application/json, text/javascript, */*","Content-Type":"application/json; charset=utf-8"},b.defaults.headers.put={Accept:"application/json, text/javascript, */*","Content-Type":"application/json; charset=utf-8"}),a},function(a){var b=a.data;switch(a.status){case 404:$("div.messagesList").empty(),sessionStorage.clear(),g(b.STATUS,"errorMessage",2e4);break;case 500:$("div.messagesList").empty(),sessionStorage.clear(),g(b.STATUS,"errorMessage",2e4);break;default:g("Error "+a.status+": "+a.data,"errorMessage",2e4)}return c.reject(a)})}}]),c.directive("appMessages",function(){var a={restrict:"A",template:"<div></div>",replace:!0,link:function(a,b){f.push($(b))}};return a})}]),angular.module("factories",[]).factory("message",function(){return[]}).factory("ContactFactory",["$resource",function(a){var b="http://10.156.147.121:443:443/WebServicesBackEnd/SalvageComplaint.aspx/SendFields";return a(b,{},{contactInfo:{method:"Post",url:b}})}]);