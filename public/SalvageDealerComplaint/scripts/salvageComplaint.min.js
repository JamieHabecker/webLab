angular.module("salvageComplaint",["ngResource","globals","factories"]).config(["$routeProvider","$locationProvider","$httpProvider",function(a,b,c){c.defaults.headers.get={Accept:"application/json, text/javascript, */*"},a.when("/",{controller:"DisclaimerController",templateUrl:"views/disclaimer.html"}).when("/StepOne",{controller:"StepOneController",templateUrl:"views/stepOne.html"}).when("/StepTwo",{controller:"StepTwoController",templateUrl:"views/stepTwo.html"}).when("/StepThree",{controller:"StepThreeController",templateUrl:"views/stepThree.html"}).when("/StepFour",{controller:"StepFourController",templateUrl:"views/stepFour.html"}).when("/StepFive",{controller:"StepFiveController",templateUrl:"views/stepFive.html"}).when("/StepSix",{controller:"StepSixController",templateUrl:"views/stepSix.html"}).when("/Verify",{controller:"VerifyController",templateUrl:"views/confirmation.html"}).when("/Complete",{controller:"CompleteController",templateUrl:"views/complete.html"}).otherwise({redirectTo:"/"})}]).controller("DisclaimerController",["$scope","$location",function(a,b){sessionStorage.clear(),a.next=function(){b.path("/StepOne")}}]).controller("StepOneController",["$scope","$location",function(a,b){var c=sessionStorage.anonymous;void 0===c?a.checkIt=!0:a.anonymous="Yes"===c?"Yes":"No",a.one=function(){sessionStorage.anonymous="Yes",a.checkIt=!1},a.two=function(){sessionStorage.anonymous="No",a.checkIt=!1},a.next=function(){"No"===a.anonymous?b.path("/StepTwo"):b.path("/StepFour")}}]).controller("StepTwoController",["$scope","$location","$timeout",function(a,b,c){var d=sessionStorage.anonymous,e=sessionStorage.stepTwo,f=sessionStorage.statetwo,g=sessionStorage.stateCodetwo;if(void 0===d&&b.path("/StepOne"),e){var h=sessionStorage.getItem("stepTwo"),i=JSON.parse(h),j={fillIt:function(){a.fn=i.firstname,a.lastname=i.lastname,a.address=i.address,a.city=i.city,a.zip=i.zip,a.current=f}};c(j.fillIt,100)}a.next=function(){var c={firstname:a.fn,lastname:a.lastname,address:a.address,city:a.city,state:f,stateCode:g,zip:a.zip};sessionStorage.setItem("stepTwo",JSON.stringify(c)),b.path("/StepThree")}}]).controller("StepThreeController",["$scope","$location","$timeout",function(a,b,c){var d=(sessionStorage.stepTwo,sessionStorage.stepThree),e=sessionStorage.complete;if(d){var f=sessionStorage.getItem("stepThree"),g=JSON.parse(f),h={fillIt:function(){a.email=g.email,a.phone=g.phone,a.conPref=g.conPref}};c(h.fillIt,100)}a.next=function(){var c={email:a.email,phone:a.phone,conPref:a.conPref};sessionStorage.setItem("stepThree",JSON.stringify(c)),e?b.path("/Verify"):b.path("/StepFour")}}]).controller("StepFourController",["$scope","$location","$timeout",function(a,b,c){var d=sessionStorage.stepFour,e=sessionStorage.stateFour,f=sessionStorage.stateCodefour,g=sessionStorage.complete;if(sessionStorage.anonymous,d){var h=sessionStorage.getItem("stepFour"),i=JSON.parse(h),j={fillIt:function(){a.compName=i.compName,a.address=i.address,a.city=i.city,a.zip=i.zip,a.email=i.email,a.phone=i.phone}};c(j.fillIt,100)}a.next=function(){var c={compName:a.compName,address:a.address,city:a.city,zip:a.zip,state:e,stateCode:f,email:a.email,phone:a.phone};sessionStorage.setItem("stepFour",JSON.stringify(c)),g?b.path("/Verify"):b.path("/StepFive")}}]).controller("StepFiveController",["$scope","$location","$timeout","$filter",function(a,b,c,d){var e=sessionStorage.stepFour,f=sessionStorage.stepFive,g=sessionStorage.complete;if(void 0===e&&b.path("/"),f){var h=sessionStorage.getItem("stepFive"),i=JSON.parse(h),j=i.complDate,k=d("date")(j,"longDate"),l={fillIt:function(){a.vyear=i.year,a.vmake=i.make,a.vmodel=i.model,a.vvin=i.vin,a.vplate=i.plate,a.date=k}};c(l.fillIt,500)}a.next=function(){var c=a.date,e=d("date")(c,"longDate"),f={year:a.vyear,make:a.vmake,model:a.vmodel,vin:a.vvin,plate:a.vplate,complDate:e};sessionStorage.setItem("stepFive",JSON.stringify(f)),g?b.path("/Verify"):b.path("/StepSix")}}]).controller("StepSixController",["$scope","$location","$timeout",function(a,b,c){var d=sessionStorage.stepFour,e=sessionStorage.stepSix;if(void 0===d&&b.path("/"),e){var f=sessionStorage.getItem("stepSix"),g=JSON.parse(f),h={fillIt:function(){a.details=g.details}};c(h.fillIt,100)}a.next=function(){var c={details:a.details};sessionStorage.setItem("stepSix",JSON.stringify(c)),b.path("/Verify")}}]).controller("VerifyController",["$scope","$location","ContactFactory",function(a,b,c){function d(a){sessionStorage.refNumber=a.ComplaintId,b.path("/Complete")}function e(b){a.err=b.status}var f=sessionStorage.stepTwo,g=sessionStorage.stepThree,h=sessionStorage.stepFour,i=sessionStorage.stepFive,j=sessionStorage.stepSix,k=sessionStorage.stateCodetwo,l=sessionStorage.stateCodefour,m=sessionStorage.anonymous;void 0===j&&b.path("/"),j?(cdFour=JSON.parse(h),cdSix=JSON.parse(j),cdFive=JSON.parse(i),"No"===m?(cdTwo=JSON.parse(f),cdThree=JSON.parse(g),data={pc:"true",firstname:cdTwo.firstname,lastname:cdTwo.lastname,address:cdTwo.address,city:cdTwo.city,zip:cdTwo.zip,state:k,email:cdThree.email,phone:cdThree.phone,conPref:cdThree.conPref,compName:cdFour.compName,compAddress:cdFour.address,compCity:cdFour.city,compState:l,compZip:cdFour.zip,compEmail:cdFour.email,compPhone:cdFour.phone,year:cdFive.year,make:cdFive.make,model:cdFive.model,vin:cdFive.vin,plate:cdFive.plate,complDate:cdFive.complDate,learned:sessionStorage.optslearned,details:cdSix.details},a.theData=[data]):(a.vary="gen",a.vary2="sec",a.vary3="sing",data={pc:"false",compName:cdFour.compName,compAddress:cdFour.address,compCity:cdFour.city,compState:l,compZip:cdFour.zip,compEmail:cdFour.email,compPhone:cdFour.phone,details:cdSix.details,year:cdFive.year,make:cdFive.make,model:cdFive.model,vin:cdFive.vin,plate:cdFive.plate,complDate:cdFive.complDate,learned:sessionStorage.optslearned},a.theData=[data])):(sessionStorage.clear(),b.path("/")),a.edit=function(a){sessionStorage.complete="yes",b.path("/"+a)},a.next=function(){a.isloading=!0;var b={oSalvageFields:data};sessionStorage.setItem("data",JSON.stringify(data)),c.contactInfo({},b,d,e)}}]).controller("CompleteController",["$scope","complete",function(a){a.ref="[#"+sessionStorage.refNumber+"]",sessionStorage.clear(),a.next=function(){window.location.replace("/")}}]).factory("message",function(){return[]}).factory("ContactFactory",["$resource",function(a){var b="/apps/WebServicesBackEnd/SalvageComplaint.aspx/SendFields";return a(b,{},{contactInfo:{method:"Post",url:b}})}]);