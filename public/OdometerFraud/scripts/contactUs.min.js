angular.module("odomFraud",["ngResource","directives","dmvPortalConfig","globals","factories"]).config(["$routeProvider","$locationProvider","$httpProvider",function(a,b,c){c.defaults.headers.get={Accept:"application/json, text/javascript, */*"},a.when("/",{controller:"DisclaimerController",templateUrl:"views/disclaimer.html"}).when("/StepOne",{controller:"StepOneController",templateUrl:"views/stepOne.html"}).when("/StepTwo",{controller:"StepTwoController",templateUrl:"views/stepTwo.html"}).when("/StepThree",{controller:"StepThreeController",templateUrl:"views/stepThree.html"}).when("/StepFour",{controller:"StepFourController",templateUrl:"views/stepFour.html"}).when("/StepFive",{controller:"StepFiveController",templateUrl:"views/stepFive.html"}).when("/StepSix",{controller:"StepSixController",templateUrl:"views/stepSix.html"}).when("/Verify",{controller:"VerifyController",templateUrl:"views/confirmation.html"}).when("/Complete",{controller:"CompleteController",templateUrl:"views/complete.html"}).otherwise({redirectTo:"/"})}]).controller("DisclaimerController",["$scope","$location","complete",function(a,b){a.next=function(){b.path("/StepOne")}}]).controller("StepOneController",["$scope","$location","complete",function(a,b){if(sessionStorage.type){var c=sessionStorage.type;a.comType="1"===c?"1":"2",a.checkIt=!1}else a.checkIt=!0;a.one=function(){sessionStorage.type="1",a.checkIt=!1},a.two=function(){sessionStorage.type="2",a.checkIt=!0},a.check=function(){a.checkIt=!1},a.next=function(){"1"===a.comType||"Yes"===a.an?(sessionStorage.an=!1,b.path("/StepTwo")):(sessionStorage.removeItem("an"),b.path("/StepFour"))}}]).controller("StepTwoController",["$scope","$location","$timeout","complete",function(a,b,c,d){if(sessionStorage.stepTwo){var e=sessionStorage.getItem("stepTwo"),f=JSON.parse(e),g={fillIt:function(){a.fn=f.firstname,a.lastname=f.lastname,a.address=f.address,a.city=f.city,a.current=sessionStorage.state,a.zip=f.zip}};c(g.fillIt,100)}else a.current="Select a State";a.next=function(){void 0!==a.state&&(sessionStorage.state=a.state.code);var c={firstname:a.fn,lastname:a.lastname,address:a.address,city:a.city,zip:a.zip};sessionStorage.setItem("stepTwo",JSON.stringify(c)),d?b.path("/Verify"):b.path("/StepThree")}}]).controller("StepThreeController",["$scope","$location","$timeout","complete",function(a,b,c,d){if(sessionStorage.stepThree){var e=sessionStorage.getItem("stepThree"),f=JSON.parse(e),g={fillIt:function(){a.email=f.email,a.phone=f.phone,a.conPref=f.conPref}};c(g.fillIt,100)}a.next=function(){var c={email:a.email,phone:a.phone,conPref:a.conPref};sessionStorage.setItem("stepThree",JSON.stringify(c)),d?b.path("/Verify"):b.path("/StepFour")}}]).controller("StepFourController",["$scope","$location","$timeout","complete",function(a,b,c,d){if(sessionStorage.stepFour){a.current=sessionStorage.compState?sessionStorage.compState:"Select a State";var e=sessionStorage.getItem("stepFour"),f=JSON.parse(e),g={fillIt:function(){a.compName=f.compName,a.compAddress=f.compAddress,a.city=f.city,a.zip=f.zip,a.email=f.email,a.phone=f.phone}};c(g.fillIt,100)}else a.current="Select a State";a.next=function(){void 0!==a.state&&(sessionStorage.compState=a.state.State);var c={compName:a.compName,compAddress:a.compAddress,city:a.city,zip:a.zip,email:a.email,phone:a.phone};sessionStorage.setItem("stepFour",JSON.stringify(c)),d?b.path("/Verify"):sessionStorage.an?b.path("/StepFive"):sessionStorage.an&&d?b.path("/Verify"):b.path("/StepSix")}}]).controller("StepFiveController",["$scope","$location","$timeout","complete",function(a,b,c,d){if(sessionStorage.stepFive){var e=sessionStorage.getItem("stepFive"),f=JSON.parse(e),g={fillIt:function(){a.vyear=f.year,a.vmake=f.make,a.vmodel=f.model,a.vvin=f.vin,a.vplate=f.plate,a.vpc=f.prmColor,a.vsc=f.secColor}};c(g.fillIt,100)}a.next=function(){var c={year:a.vyear,make:a.vmake,model:a.vmodel,vin:a.vvin,plate:a.vplate,prmColor:a.vpc,secColor:a.vsc};sessionStorage.setItem("stepFive",JSON.stringify(c)),d?b.path("/Verify"):b.path("/StepSix")}}]).controller("StepSixController",["$scope","$location","$timeout","complete",function(a,b,c){if(sessionStorage.stepSix){var d=sessionStorage.getItem("stepSix"),e=JSON.parse(d),f={fillIt:function(){a.details=e.details}};c(f.fillIt,100)}a.next=function(){var c={details:a.details};sessionStorage.setItem("stepSix",JSON.stringify(c)),b.path("/Verify")}}]).controller("VerifyController",["$scope","$location","ContactFactory",function(a,b,c){function d(a){sessionStorage.refNumber=a.ComplaintId,b.path("/Complete")}function e(b){a.err=b.status}var f,g,h,i,j,k,l,m,n,o,p=sessionStorage.state,q=sessionStorage.compState;sessionStorage.stepSix?(h=sessionStorage.getItem("stepFour"),j=sessionStorage.getItem("stepSix"),m=JSON.parse(h),o=JSON.parse(j),sessionStorage.an?(f=sessionStorage.getItem("stepTwo"),g=sessionStorage.getItem("stepThree"),i=sessionStorage.getItem("stepFive"),k=JSON.parse(f),l=JSON.parse(g),n=JSON.parse(i),data={pc:"true",firstname:k.firstname,lastname:k.lastname,address:k.address,city:k.city,zip:k.zip,state:p,email:l.email,phone:l.phone,conPref:l.conPref,compName:m.compName,compAddress:m.compAddress,compCity:m.compCity,compState:q,compZip:m.compZip,compEmail:m.compEmail,compPhone:m.compPhone,year:n.year,make:n.make,model:n.model,vin:n.vin,plate:n.plate,prmColor:n.prmColor,secColor:n.secColor,details:o.details},a.theData=[data]):(data={pc:"false",compName:m.compName,compAddress:m.compAddress,compCity:m.compCity,compState:q,compZip:m.compZip,compEmail:m.compEmail,compPhone:m.compPhone,details:o.details},a.theData=[data])):(sessionStorage.complete=!1,b.path("/")),a.edit=function(a){sessionStorage.complete=!0,b.path("/"+a)},a.next=function(){a.isloading=!0;var b={oOdometerFraudFields:data};sessionStorage.setItem("data",JSON.stringify(data)),c.contactInfo({},b,d,e)}}]).controller("CompleteController",["$scope","complete",function(a){a.ref="[#"+sessionStorage.refNumber+"]",sessionStorage.clear(),a.next=function(){window.location.replace("/")}}]).animation("an-enter",function(){return{setup:function(a){return a.css({opacity:.3}),{}},start:function(a,b){a.animate({opacity:1},300,function(){b()})}}}),angular.module("directives",[]).directive("placeholder",["$timeout",function(a){if(navigator.userAgent.indexOf("MSIE")<0)return{};if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var b=new Number(RegExp.$1);return b>10?void 0:{link:function(b,c,d){"password"!==d.type&&a(function(){c.val(d.placeholder).focus(function(){$(this).val()==$(this).attr("placeholder")&&$(this).val("")}).blur(function(){""==$(this).val()&&$(this).val($(this).attr("placeholder"))})})}}}}]).directive("button",function(){return{restrict:"E",compile:function(a){a.addClass("orgBtn")}}}).directive("subject",function(){return{restrict:"E",replace:!0,templateUrl:base+"subjectSelect.html",link:function(){}}}).directive("custnumber",["$parse",function(a){return{restrict:"A",link:function(b){var c=$("input").attr("name");b.$watch(c,function(d){d&&-1!==d.indexOf("-")&&11===d.length&&a(c).assign(b,d.replace(/-/g,""))})}}}]),angular.module("dmvPortalConfig",[]).config(["$provide","$httpProvider","$compileProvider",function(a,b,c){var d;window.location.host;var e,f=$(),g=function(a,b,c,d){$("<h2>").addClass("message").addClass(b).appendTo(f).text(a)};b.responseInterceptors.push(["$timeout","$q","message","$location","$window",function(a,c,f,h){return function(a){var f=sessionStorage.id;return $("div.messagesList").length?($("div.messagesList").empty(),g("Loading...","loadingMessage",5e4)):g("Loading...","loadingMessage",5e4),a.then(function(c){if(c&&$("h2.loadingMessage").fadeOut(1040),d=c.headers("x-auth-token"),null!==d&&void 0!==d){e=c.headers("x-auth-token"),sessionStorage.id=e,credStore.push(e);var g=credStore.shift();b.defaults.headers.common={"X-Auth-Token":g},b.defaults.headers.common={Accept:"application/json, text/plain, * / *"}}return f&&(b.defaults.headers.get={Accept:"application/json, text/javascript, */*"},b.defaults.headers.post={Accept:"application/json, text/javascript, */*","Content-Type":"application/json; charset=utf-8"},b.defaults.headers.put={Accept:"application/json, text/javascript, */*","Content-Type":"application/json; charset=utf-8"}),a},function(a){var b=a.data;switch(a.status){case 404:$("div.messagesList").empty(),sessionStorage.clear(),g(b.STATUS,"errorMessage",2e4);break;case 500:$("div.messagesList").empty(),sessionStorage.clear(),g(b.STATUS,"errorMessage",2e4);break;default:g("Error "+a.status+": "+a.data,"errorMessage",2e4)}return c.reject(a)})}}]),c.directive("appMessages",function(){var a={restrict:"A",template:"<div></div>",replace:!0,link:function(a,b){f.push($(b))}};return a})}]),angular.module("factories",[]).factory("message",function(){return[]}).factory("complete",function(){return 1==sessionStorage.complete?!0:!1}).factory("ContactFactory",["$resource",function(a){var b="//10.156.147.121/odometerfraud/Default.aspx/SendFields";return a(b,{},{contactInfo:{method:"Post",url:b}})}]);